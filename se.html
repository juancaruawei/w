<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Salary Clock</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            padding: 20px;
            margin: 0;
            background-color: #f9f9f9;
            color: #333;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            background-color: white;
        }
        h1 {
            color: #1a73e8;
            text-align: center;
            margin-bottom: 20px;
        }
        .salary-display {
            font-size: 38px;
            font-weight: bold;
            margin: 20px 0;
            color: #2383E2;
            text-align: center;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        .info-box {
            background-color: #f1f1f1;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .time-display {
            font-size: 20px;
            margin-bottom: 15px;
            text-align: center;
            font-weight: 500;
        }
        .stats {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 25px;
        }
        .stat-box {
            flex: 1;
            min-width: 150px;
            padding: 15px;
            background-color: #e9f5ff;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        .stat-box p {
            margin-top: 0;
            font-weight: 600;
            color: #1a73e8;
        }
        .stat-value {
            font-size: 24px;
            font-weight: bold;
        }
        .progress-container {
            margin: 20px 0;
            background-color: #f1f1f1;
            border-radius: 10px;
            height: 20px;
        }
        .progress-bar {
            height: 100%;
            border-radius: 10px;
            background-color: #4CAF50;
            width: 0%;
            transition: width 0.5s ease;
        }
        footer {
            margin-top: 25px;
            text-align: center;
            font-size: 12px;
            color: #888;
        }
        .settings-toggle {
            cursor: pointer;
            text-decoration: underline;
            color: #666;
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
        }
        .settings-panel {
            display: none;
            background-color: #f9f9f9;
            padding: 15px;
            margin-top: 10px;
            border-radius: 8px;
        }
        .settings-panel.show {
            display: block;
        }
        .settings-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            align-items: center;
        }
        input {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        button {
            background-color: #1a73e8;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0d62cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Real-Time Salary Clock</h1>
        
        <div class="info-box">
            <p><strong>Hourly rate:</strong> <span id="hourly-rate">213.09</span> NOK</p>
            <p><strong>Working hours:</strong> <span id="work-start">8</span> AM - <span id="work-end">4</span> PM (Monday to Friday)</p>
            <p><strong>Daily earnings:</strong> <span id="daily-earnings">1,704.72</span> NOK</p>
            <p><strong>Weekly earnings:</strong> <span id="weekly-earnings">8,523.60</span> NOK</p>
        </div>
        
        <div class="time-display">Current time: <span id="current-time"></span></div>
        
        <div>
            <p style="text-align: center; margin-bottom: 5px;">Earned today:</p>
            <div class="salary-display" id="today-salary">0.00 NOK</div>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar" id="day-progress"></div>
        </div>
        
        <div class="stats">
            <div class="stat-box">
                <p>This week</p>
                <div class="stat-value" id="week-salary">0.00 NOK</div>
            </div>
            <div class="stat-box">
                <p>This month</p>
                <div class="stat-value" id="month-salary">0.00 NOK</div>
            </div>
        </div>

        <div class="stats">
            <div class="stat-box">
                <p>Hours worked today</p>
                <div class="stat-value" id="hours-worked">0.00</div>
            </div>
            <div class="stat-box">
                <p>Percent of day</p>
                <div class="stat-value" id="day-percent">0%</div>
            </div>
        </div>
        
        <div class="settings-toggle" id="settings-toggle">⚙️ Customize Settings</div>
        <div class="settings-panel" id="settings-panel">
            <div class="settings-row">
                <label for="rate-input">Hourly Rate (NOK):</label>
                <input type="number" id="rate-input" step="0.01" min="0">
            </div>
            <div class="settings-row">
                <label for="start-input">Work Start (24h):</label>
                <input type="number" id="start-input" min="0" max="23">
            </div>
            <div class="settings-row">
                <label for="end-input">Work End (24h):</label>
                <input type="number" id="end-input" min="0" max="23">
            </div>
            <div class="settings-row">
                <button id="save-settings">Save Settings</button>
            </div>
        </div>

        <footer>Last updated: <span id="update-time"></span></footer>
    </div>

    <script>
        // Load settings from localStorage or use defaults
        let HOURLY_RATE = parseFloat(localStorage.getItem('hourlyRate')) || 213.09;
        let WORK_START_HOUR = parseInt(localStorage.getItem('workStartHour')) || 8;
        let WORK_END_HOUR = parseInt(localStorage.getItem('workEndHour')) || 16;
        
        const SECONDS_PER_HOUR = 3600;
        const WORK_HOURS = WORK_END_HOUR - WORK_START_HOUR;
        
        // Initialize settings form
        document.getElementById('rate-input').value = HOURLY_RATE;
        document.getElementById('start-input').value = WORK_START_HOUR;
        document.getElementById('end-input').value = WORK_END_HOUR;
        
        // Update displayed settings
        document.getElementById('hourly-rate').textContent = HOURLY_RATE.toFixed(2);
        document.getElementById('work-start').textContent = WORK_START_HOUR;
        document.getElementById('work-end').textContent = WORK_END_HOUR === 12 ? 12 : WORK_END_HOUR % 12;
        document.getElementById('daily-earnings').textContent = formatNumber(HOURLY_RATE * WORK_HOURS);
        document.getElementById('weekly-earnings').textContent = formatNumber(HOURLY_RATE * WORK_HOURS * 5);
        
        // Toggle settings panel
        document.getElementById('settings-toggle').addEventListener('click', function() {
            document.getElementById('settings-panel').classList.toggle('show');
        });
        
        // Save settings
        document.getElementById('save-settings').addEventListener('click', function() {
            const newRate = parseFloat(document.getElementById('rate-input').value);
            const newStart = parseInt(document.getElementById('start-input').value);
            const newEnd = parseInt(document.getElementById('end-input').value);
            
            if (isNaN(newRate) || isNaN(newStart) || isNaN(newEnd)) {
                alert('Please enter valid numbers for all fields');
                return;
            }
            
            if (newStart >= newEnd) {
                alert('Work start time must be before work end time');
                return;
            }
            
            // Save to localStorage
            localStorage.setItem('hourlyRate', newRate);
            localStorage.setItem('workStartHour', newStart);
            localStorage.setItem('workEndHour', newEnd);
            
            // Update global variables
            HOURLY_RATE = newRate;
            WORK_START_HOUR = newStart;
            WORK_END_HOUR = newEnd;
            
            // Update displayed settings
            document.getElementById('hourly-rate').textContent = HOURLY_RATE.toFixed(2);
            document.getElementById('work-start').textContent = WORK_START_HOUR;
            document.getElementById('work-end').textContent = WORK_END_HOUR === 12 ? 12 : WORK_END_HOUR % 12;
            document.getElementById('daily-earnings').textContent = formatNumber(HOURLY_RATE * (WORK_END_HOUR - WORK_START_HOUR));
            document.getElementById('weekly-earnings').textContent = formatNumber(HOURLY_RATE * (WORK_END_HOUR - WORK_START_HOUR) * 5);
            
            // Hide settings panel
            document.getElementById('settings-panel').classList.remove('show');
            
            // Force immediate update
            updateSalary();
        });
        
        function formatNumber(num) {
            return num.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
        
        function updateSalary() {
            const now = new Date();
            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();
            const currentSecond = now.getSeconds();
            const currentDay = now.getDay(); // 0 is Sunday, 1 is Monday, etc.
            
            // Update last updated time
            document.getElementById('update-time').textContent = now.toLocaleTimeString();
            
            // Update current time display
            document.getElementById('current-time').textContent = now.toLocaleTimeString();
            
            // Check if it's a workday (Monday to Friday)
            const isWorkday = currentDay >= 1 && currentDay <= 5;
            
            // Check if it's during working hours
            const isDuringWorkHours = currentHour >= WORK_START_HOUR && currentHour < WORK_END_HOUR;
            
            let todaySalary = 0;
            let hoursWorked = 0;
            let dayPercent = 0;
            
            if (isWorkday) {
                if (currentHour < WORK_START_HOUR) {
                    // Before work starts
                    todaySalary = 0;
                    hoursWorked = 0;
                    dayPercent = 0;
                } else if (currentHour >= WORK_END_HOUR) {
                    // After work ends, full day salary
                    todaySalary = WORK_HOURS * HOURLY_RATE;
                    hoursWorked = WORK_HOURS;
                    dayPercent = 100;
                } else {
                    // During work hours
                    hoursWorked = (currentHour - WORK_START_HOUR) + (currentMinute / 60) + (currentSecond / 3600);
                    todaySalary = hoursWorked * HOURLY_RATE;
                    dayPercent = (hoursWorked / WORK_HOURS) * 100;
                }
            }
            
            // Calculate week salary
            let weekSalary = 0;
            const today = now.getDay();
            
            // For past days in the week
            for (let day = 1; day < today; day++) {
                if (day >= 1 && day <= 5) { // Weekdays only
                    weekSalary += WORK_HOURS * HOURLY_RATE;
                }
            }
            
            // Add today's salary
            weekSalary += todaySalary;
            
            // Calculate month salary
            const currentDate = now.getDate();
            const currentMonth = now.getMonth();
            const currentYear = now.getFullYear();
            let monthSalary = 0;
            
            // For each day in the current month up to yesterday
            for (let day = 1; day < currentDate; day++) {
                const date = new Date(currentYear, currentMonth, day);
                const dayOfWeek = date.getDay();
                
                // If it's a weekday (1-5)
                if (dayOfWeek >= 1 && dayOfWeek <= 5) {
                    monthSalary += WORK_HOURS * HOURLY_RATE;
                }
            }
            
            // Add today's salary
            monthSalary += todaySalary;
            
            // Update the progress bar
            document.getElementById('day-progress').style.width = `${dayPercent}%`;
            
            // Update the displays with formatted numbers
            document.getElementById('today-salary').textContent = formatNumber(todaySalary) + ' NOK';
            document.getElementById('week-salary').textContent = formatNumber(weekSalary) + ' NOK';
            document.getElementById('month-salary').textContent = formatNumber(monthSalary) + ' NOK';
            document.getElementById('hours-worked').textContent = hoursWorked.toFixed(2);
            document.getElementById('day-percent').textContent = dayPercent.toFixed(0) + '%';
        }
        
        // Update immediately and then every second
        updateSalary();
        setInterval(updateSalary, 1000);
    </script>
</body>
</html>
